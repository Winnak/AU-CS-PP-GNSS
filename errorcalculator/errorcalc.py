""" Python 3 program to calculate the cumulative error """

#pylint: disable=C

import sys
import math
import datetime
import os.path
import xml.etree.ElementTree as ET

METERSPERSEC = 2.0
T_POS = [[10.18863528395544, 56.1718167368093],
         [10.18843868032121, 56.17161397146886],
         [10.18825312495371, 56.17161690159397],
         [10.18785876852806, 56.17067413379924],
         [10.18867122638363, 56.17054152073421],
         [10.1884718758678, 56.17008266958371],
         [10.18882969229213, 56.17003002550649],
         [10.18865430467, 56.16955002244181],
         [10.18885826270572, 56.16939494824196],
         [10.18886926162166, 56.16931732635131],
         [10.18934629802868, 56.16928490818662],
         [10.18953700018306, 56.16972535344797],
         [10.18984427564552, 56.17040330830756],
         [10.1903055433096, 56.17146720503291],
         [10.18862542434161, 56.17174364044325],
         [10.18867376461784, 56.17181347215714]]
T_POS_INTERPOLATED = [[10.18863528395544, 56.1718167368093],
                      [10.188622675268585, 56.17180373295668],
                      [10.188610066581727, 56.17179072910407],
                      [10.188597457894872, 56.17177772525145],
                      [10.188584849208015, 56.171764721398844],
                      [10.18857224052116, 56.17175171754623],
                      [10.188559631834302, 56.171738713693614],
                      [10.188547023147446, 56.171725709841],
                      [10.18853441446059, 56.171712705988384],
                      [10.188521805773734, 56.17169970213577],
                      [10.188509197086878, 56.17168669828316],
                      [10.188496588400021, 56.171673694430545],
                      [10.188483979713165, 56.17166069057793],
                      [10.188471371026308, 56.171647686725315],
                      [10.188458762339453, 56.1716346828727],
                      [10.18843868032121, 56.17161397146886],
                      [10.18842071618508, 56.1716142551425],
                      [10.18840275204895, 56.17161453881614],
                      [10.188384787912819, 56.17161482248978],
                      [10.188366823776688, 56.171615106163415],
                      [10.188348859640557, 56.17161538983706],
                      [10.188330895504427, 56.17161567351069],
                      [10.188312931368296, 56.171615957184336],
                      [10.188294967232165, 56.17161624085797],
                      [10.188277003096035, 56.171616524531615],
                      [10.18825312495371, 56.17161690159397],
                      [10.188246097634972, 56.171600101741454],
                      [10.188239070316234, 56.171583301888944],
                      [10.188232042997496, 56.17156650203643],
                      [10.188225015678757, 56.17154970218391],
                      [10.18821798836002, 56.17153290233139],
                      [10.188210961041282, 56.17151610247888],
                      [10.188203933722544, 56.171499302626366],
                      [10.188196906403807, 56.17148250277385],
                      [10.18818987908507, 56.17146570292133],
                      [10.188182851766332, 56.17144890306882],
                      [10.188175824447592, 56.171432103216304],
                      [10.188168797128855, 56.17141530336379],
                      [10.188161769810117, 56.17139850351127],
                      [10.18815474249138, 56.17138170365876],
                      [10.188147715172642, 56.17136490380624],
                      [10.188140687853904, 56.171348103953726],
                      [10.188133660535167, 56.17133130410121],
                      [10.188126633216427, 56.1713145042487],
                      [10.18811960589769, 56.17129770439618],
                      [10.188112578578952, 56.171280904543664],
                      [10.188105551260215, 56.171264104691154],
                      [10.188098523941477, 56.17124730483864],
                      [10.18809149662274, 56.17123050498612],
                      [10.188084469304002, 56.1712137051336],
                      [10.188077441985262, 56.17119690528109],
                      [10.188070414666525, 56.171180105428576],
                      [10.188063387347787, 56.17116330557606],
                      [10.18805636002905, 56.17114650572354],
                      [10.188049332710312, 56.17112970587103],
                      [10.188042305391575, 56.171112906018514],
                      [10.188035278072837, 56.171096106166],
                      [10.188028250754098, 56.17107930631348],
                      [10.18802122343536, 56.17106250646097],
                      [10.188014196116622, 56.17104570660845],
                      [10.188007168797885, 56.171028906755936],
                      [10.188000141479147, 56.171012106903426],
                      [10.18799311416041, 56.17099530705091],
                      [10.187986086841672, 56.17097850719839],
                      [10.187979059522933, 56.170961707345874],
                      [10.187972032204195, 56.170944907493364],
                      [10.187965004885458, 56.17092810764085],
                      [10.18795797756672, 56.17091130778833],
                      [10.187950950247982, 56.17089450793581],
                      [10.187943922929245, 56.1708777080833],
                      [10.187936895610507, 56.170860908230786],
                      [10.187929868291768, 56.17084410837827],
                      [10.18792284097303, 56.17082730852575],
                      [10.187915813654293, 56.17081050867324],
                      [10.187908786335555, 56.170793708820725],
                      [10.187901759016817, 56.17077690896821],
                      [10.18789473169808, 56.17076010911569],
                      [10.187887704379342, 56.17074330926318],
                      [10.187880677060603, 56.17072650941066],
                      [10.187873649741865, 56.170709709558146],
                      [10.187866622423128, 56.170692909705636],
                      [10.18785876852806, 56.17067413379924],
                      [10.187876507383724, 56.17067123838257],
                      [10.187894246239386, 56.1706683429659],
                      [10.18791198509505, 56.170665447549226],
                      [10.187929723950713, 56.170662552132555],
                      [10.187947462806378, 56.170659656715884],
                      [10.18796520166204, 56.17065676129921],
                      [10.187982940517704, 56.17065386588254],
                      [10.188000679373369, 56.17065097046587],
                      [10.188018418229031, 56.1706480750492],
                      [10.188036157084696, 56.17064517963253],
                      [10.188053895940358, 56.17064228421586],
                      [10.188071634796023, 56.17063938879919],
                      [10.188089373651685, 56.17063649338251],
                      [10.18810711250735, 56.17063359796584],
                      [10.188124851363014, 56.17063070254917],
                      [10.188142590218677, 56.1706278071325],
                      [10.188160329074341, 56.17062491171583],
                      [10.188178067930004, 56.170622016299156],
                      [10.188195806785668, 56.170619120882485],
                      [10.18821354564133, 56.170616225465814],
                      [10.188231284496995, 56.17061333004914],
                      [10.18824902335266, 56.17061043463247],
                      [10.188266762208322, 56.1706075392158],
                      [10.188284501063986, 56.17060464379913],
                      [10.188302239919649, 56.17060174838246],
                      [10.188319978775313, 56.17059885296579],
                      [10.188337717630976, 56.17059595754912],
                      [10.18835545648664, 56.17059306213245],
                      [10.188373195342304, 56.170590166715776],
                      [10.188390934197967, 56.170587271299105],
                      [10.188408673053631, 56.170584375882434],
                      [10.188426411909294, 56.17058148046576],
                      [10.188444150764958, 56.17057858504909],
                      [10.188461889620621, 56.17057568963242],
                      [10.188479628476285, 56.17057279421575],
                      [10.188497367331948, 56.17056989879908],
                      [10.188515106187612, 56.17056700338241],
                      [10.188532845043277, 56.17056410796574],
                      [10.18855058389894, 56.17056121254906],
                      [10.188568322754604, 56.17055831713239],
                      [10.188586061610266, 56.17055542171572],
                      [10.18860380046593, 56.17055252629905],
                      [10.188621539321593, 56.17054963088238],
                      [10.188639278177257, 56.170546735465706],
                      [10.18867122638363, 56.17054152073421],
                      [10.18866397115837, 56.17052482116138],
                      [10.188656715933108, 56.170508121588554],
                      [10.188649460707849, 56.17049142201572],
                      [10.188642205482589, 56.17047472244289],
                      [10.188634950257327, 56.17045802287006],
                      [10.188627695032068, 56.17044132329723],
                      [10.188620439806808, 56.1704246237244],
                      [10.188613184581548, 56.17040792415157],
                      [10.188605929356287, 56.170391224578744],
                      [10.188598674131027, 56.17037452500591],
                      [10.188591418905768, 56.17035782543308],
                      [10.188584163680506, 56.17034112586025],
                      [10.188576908455246, 56.17032442628742],
                      [10.188569653229987, 56.17030772671459],
                      [10.188562398004725, 56.17029102714176],
                      [10.188555142779466, 56.170274327568926],
                      [10.188547887554206, 56.1702576279961],
                      [10.188540632328944, 56.17024092842327],
                      [10.188533377103685, 56.17022422885044],
                      [10.188526121878425, 56.17020752927761],
                      [10.188518866653165, 56.17019082970478],
                      [10.188511611427904, 56.17017413013195],
                      [10.188504356202644, 56.170157430559115],
                      [10.188497100977385, 56.17014073098629],
                      [10.188489845752123, 56.17012403141346],
                      [10.188482590526863, 56.170107331840626],
                      [10.1884718758678, 56.17008266958371],
                      [10.188489656719618, 56.1700800535592],
                      [10.188507437571435, 56.17007743753469],
                      [10.188525218423253, 56.17007482151018],
                      [10.18854299927507, 56.17007220548567],
                      [10.188560780126888, 56.17006958946116],
                      [10.188578560978705, 56.17006697343665],
                      [10.188596341830523, 56.17006435741214],
                      [10.188614122682342, 56.17006174138763],
                      [10.188631903534159, 56.17005912536312],
                      [10.188649684385977, 56.17005650933861],
                      [10.188667465237794, 56.1700538933141],
                      [10.188685246089612, 56.17005127728959],
                      [10.18870302694143, 56.17004866126508],
                      [10.188720807793247, 56.17004604524057],
                      [10.188738588645066, 56.17004342921606],
                      [10.188756369496883, 56.17004081319155],
                      [10.188774150348701, 56.17003819716704],
                      [10.188791931200518, 56.17003558114253],
                      [10.188809712052336, 56.17003296511802],
                      [10.18882969229213, 56.17003002550649],
                      [10.18882343941467, 56.170012912552295],
                      [10.188817186537209, 56.1699957995981],
                      [10.188810933659749, 56.1699786866439],
                      [10.188804680782289, 56.16996157368971],
                      [10.188798427904828, 56.169944460735515],
                      [10.188792175027368, 56.16992734778132],
                      [10.188785922149908, 56.16991023482712],
                      [10.188779669272447, 56.169893121872924],
                      [10.188773416394987, 56.16987600891873],
                      [10.188767163517527, 56.16985889596453],
                      [10.188760910640067, 56.169841783010334],
                      [10.188754657762606, 56.169824670056144],
                      [10.188748404885146, 56.16980755710195],
                      [10.188742152007686, 56.16979044414775],
                      [10.188735899130226, 56.169773331193554],
                      [10.188729646252765, 56.16975621823936],
                      [10.188723393375305, 56.16973910528516],
                      [10.188717140497845, 56.16972199233096],
                      [10.188710887620385, 56.16970487937677],
                      [10.188704634742924, 56.16968776642258],
                      [10.188698381865464, 56.16967065346838],
                      [10.188692128988004, 56.16965354051418],
                      [10.188685876110544, 56.169636427559986],
                      [10.188679623233083, 56.16961931460579],
                      [10.188673370355621, 56.16960220165159],
                      [10.188667117478161, 56.169585088697396],
                      [10.1886608646007, 56.169567975743206],
                      [10.18865430467, 56.16955002244181],
                      [10.1886686892094, 56.16953908553055],
                      [10.1886830737488, 56.16952814861929],
                      [10.1886974582882, 56.169517211708026],
                      [10.1887118428276, 56.16950627479677],
                      [10.188726227366997, 56.16949533788551],
                      [10.188740611906397, 56.16948440097425],
                      [10.188754996445796, 56.16947346406298],
                      [10.188769380985196, 56.16946252715172],
                      [10.188783765524596, 56.16945159024046],
                      [10.188798150063995, 56.169440653329204],
                      [10.188812534603395, 56.16942971641794],
                      [10.188826919142794, 56.16941877950668],
                      [10.188841303682192, 56.16940784259542],
                      [10.18885826270572, 56.16939494824196],
                      [10.188860822900633, 56.16937688035503],
                      [10.188863383095544, 56.169358812468104],
                      [10.188865943290457, 56.16934074458118],
                      [10.18886926162166, 56.16931732635131],
                      [10.1888871878738, 56.16931610812942],
                      [10.18890511412594, 56.169314889907525],
                      [10.18892304037808, 56.169313671685636],
                      [10.18894096663022, 56.169312453463746],
                      [10.188958892882361, 56.16931123524185],
                      [10.188976819134501, 56.16931001701996],
                      [10.18899474538664, 56.16930879879807],
                      [10.18901267163878, 56.16930758057618],
                      [10.189030597890921, 56.169306362354284],
                      [10.189048524143061, 56.169305144132395],
                      [10.1890664503952, 56.169303925910505],
                      [10.189084376647342, 56.16930270768861],
                      [10.189102302899482, 56.16930148946672],
                      [10.189120229151621, 56.16930027124483],
                      [10.189138155403763, 56.16929905302293],
                      [10.189156081655902, 56.16929783480104],
                      [10.189174007908042, 56.16929661657915],
                      [10.189191934160181, 56.16929539835726],
                      [10.189209860412323, 56.16929418013537],
                      [10.189227786664462, 56.16929296191348],
                      [10.189245712916602, 56.16929174369159],
                      [10.189263639168743, 56.16929052546969],
                      [10.189281565420883, 56.1692893072478],
                      [10.189299491673022, 56.16928808902591],
                      [10.189317417925164, 56.169286870804015],
                      [10.18934629802868, 56.16928490818662],
                      [10.189353532569639, 56.16930161706594],
                      [10.189360767110598, 56.169318325945255],
                      [10.189368001651557, 56.16933503482458],
                      [10.189375236192516, 56.1693517437039],
                      [10.189382470733475, 56.169368452583214],
                      [10.189389705274435, 56.169385161462536],
                      [10.189396939815394, 56.16940187034186],
                      [10.189404174356353, 56.16941857922117],
                      [10.189411408897312, 56.169435288100495],
                      [10.189418643438271, 56.16945199697982],
                      [10.18942587797923, 56.16946870585913],
                      [10.18943311252019, 56.16948541473845],
                      [10.189440347061149, 56.169502123617775],
                      [10.189447581602108, 56.16951883249709],
                      [10.189454816143067, 56.16953554137641],
                      [10.189462050684027, 56.169552250255734],
                      [10.189469285224986, 56.16956895913505],
                      [10.189476519765945, 56.16958566801437],
                      [10.189483754306904, 56.16960237689369],
                      [10.189490988847863, 56.16961908577301],
                      [10.189498223388822, 56.16963579465233],
                      [10.189505457929782, 56.16965250353165],
                      [10.18951269247074, 56.169669212410966],
                      [10.189519927011698, 56.16968592129029],
                      [10.189527161552657, 56.16970263016961],
                      [10.18953700018306, 56.16972535344797],
                      [10.189544515165306, 56.1697419340714],
                      [10.189552030147551, 56.169758514694834],
                      [10.189559545129796, 56.16977509531827],
                      [10.189567060112042, 56.1697916759417],
                      [10.189574575094287, 56.16980825656513],
                      [10.189582090076533, 56.169824837188564],
                      [10.189589605058776, 56.169841417811995],
                      [10.189597120041022, 56.169857998435425],
                      [10.189604635023267, 56.16987457905886],
                      [10.189612150005512, 56.169891159682294],
                      [10.189619664987758, 56.169907740305725],
                      [10.189627179970003, 56.169924320929155],
                      [10.189634694952248, 56.169940901552586],
                      [10.189642209934494, 56.16995748217602],
                      [10.18964972491674, 56.169974062799454],
                      [10.189657239898985, 56.169990643422885],
                      [10.18966475488123, 56.170007224046316],
                      [10.189672269863475, 56.170023804669746],
                      [10.18967978484572, 56.17004038529318],
                      [10.189687299827964, 56.17005696591661],
                      [10.18969481481021, 56.170073546540046],
                      [10.189702329792455, 56.170090127163476],
                      [10.1897098447747, 56.17010670778691],
                      [10.189717359756946, 56.17012328841034],
                      [10.189724874739191, 56.17013986903377],
                      [10.189732389721437, 56.1701564496572],
                      [10.189739904703682, 56.17017303028064],
                      [10.189747419685927, 56.17018961090407],
                      [10.189754934668173, 56.1702061915275],
                      [10.189762449650418, 56.17022277215093],
                      [10.189769964632664, 56.17023935277436],
                      [10.189777479614909, 56.17025593339779],
                      [10.189784994597153, 56.17027251402123],
                      [10.189792509579398, 56.17028909464466],
                      [10.189800024561643, 56.17030567526809],
                      [10.189807539543889, 56.17032225589152],
                      [10.189815054526134, 56.17033883651495],
                      [10.18982256950838, 56.17035541713838],
                      [10.189830084490625, 56.17037199776182],
                      [10.18984427564552, 56.17040330830756],
                      [10.18985151843443, 56.17042001353103],
                      [10.189858761223343, 56.170436718754495],
                      [10.189866004012254, 56.17045342397795],
                      [10.189873246801167, 56.17047012920142],
                      [10.189880489590077, 56.170486834424885],
                      [10.189887732378988, 56.17050353964835],
                      [10.1898949751679, 56.17052024487182],
                      [10.189902217956812, 56.170536950095276],
                      [10.189909460745724, 56.17055365531874],
                      [10.189916703534635, 56.17057036054221],
                      [10.189923946323546, 56.17058706576567],
                      [10.189931189112459, 56.17060377098914],
                      [10.18993843190137, 56.1706204762126],
                      [10.189945674690282, 56.170637181436064],
                      [10.189952917479193, 56.17065388665953],
                      [10.189960160268104, 56.170670591882995],
                      [10.189967403057016, 56.17068729710646],
                      [10.189974645845927, 56.17070400232992],
                      [10.18998188863484, 56.170720707553386],
                      [10.18998913142375, 56.17073741277685],
                      [10.189996374212662, 56.17075411800032],
                      [10.190003617001574, 56.17077082322378],
                      [10.190010859790485, 56.17078752844724],
                      [10.190018102579398, 56.17080423367071],
                      [10.190025345368309, 56.170820938894174],
                      [10.19003258815722, 56.17083764411764],
                      [10.190039830946132, 56.170854349341106],
                      [10.190047073735043, 56.170871054564564],
                      [10.190054316523954, 56.17088775978803],
                      [10.190061559312866, 56.170904465011496],
                      [10.190068802101777, 56.17092117023496],
                      [10.19007604489069, 56.17093787545843],
                      [10.1900832876796, 56.17095458068189],
                      [10.190090530468511, 56.17097128590535],
                      [10.190097773257424, 56.17098799112882],
                      [10.190105016046335, 56.171004696352284],
                      [10.190112258835248, 56.17102140157575],
                      [10.190119501624158, 56.17103810679921],
                      [10.19012674441307, 56.171054812022675],
                      [10.190133987201982, 56.17107151724614],
                      [10.190141229990893, 56.171088222469606],
                      [10.190148472779805, 56.17110492769307],
                      [10.190155715568716, 56.17112163291653],
                      [10.190162958357627, 56.17113833814],
                      [10.19017020114654, 56.17115504336346],
                      [10.19017744393545, 56.17117174858693],
                      [10.190184686724363, 56.171188453810394],
                      [10.190191929513274, 56.17120515903385],
                      [10.190199172302185, 56.17122186425732],
                      [10.190206415091097, 56.171238569480785],
                      [10.190213657880008, 56.17125527470425],
                      [10.19022090066892, 56.17127197992772],
                      [10.190228143457832, 56.171288685151175],
                      [10.190235386246743, 56.17130539037464],
                      [10.190242629035655, 56.17132209559811],
                      [10.190249871824566, 56.17133880082157],
                      [10.190257114613479, 56.17135550604504],
                      [10.19026435740239, 56.1713722112685],
                      [10.1902716001913, 56.17138891649196],
                      [10.190278842980213, 56.17140562171543],
                      [10.190286085769124, 56.171422326938895],
                      [10.190293328558036, 56.17143903216236],
                      [10.1903055433096, 56.17146720503291],
                      [10.190287808043779, 56.17147012307358],
                      [10.190270072777956, 56.17147304111426],
                      [10.190252337512135, 56.17147595915493],
                      [10.190234602246314, 56.171478877195604],
                      [10.19021686698049, 56.17148179523628],
                      [10.19019913171467, 56.17148471327695],
                      [10.190181396448848, 56.171487631317625],
                      [10.190163661183025, 56.1714905493583],
                      [10.190145925917204, 56.171493467398975],
                      [10.190128190651382, 56.171496385439646],
                      [10.19011045538556, 56.17149930348032],
                      [10.190092720119738, 56.171502221520996],
                      [10.190074984853917, 56.17150513956167],
                      [10.190057249588094, 56.17150805760234],
                      [10.190039514322272, 56.17151097564302],
                      [10.190021779056451, 56.17151389368369],
                      [10.190004043790628, 56.17151681172436],
                      [10.189986308524807, 56.17151972976504],
                      [10.189968573258986, 56.17152264780571],
                      [10.189950837993162, 56.17152556584638],
                      [10.189933102727341, 56.17152848388706],
                      [10.189915367461518, 56.17153140192773],
                      [10.189897632195697, 56.1715343199684],
                      [10.189879896929876, 56.17153723800908],
                      [10.189862161664053, 56.17154015604975],
                      [10.189844426398231, 56.17154307409042],
                      [10.18982669113241, 56.171545992131094],
                      [10.189808955866587, 56.17154891017177],
                      [10.189791220600766, 56.17155182821244],
                      [10.189773485334944, 56.171554746253115],
                      [10.189755750069121, 56.17155766429379],
                      [10.1897380148033, 56.171560582334465],
                      [10.189720279537479, 56.171563500375136],
                      [10.189702544271656, 56.171566418415814],
                      [10.189684809005835, 56.171569336456486],
                      [10.189667073740013, 56.17157225449716],
                      [10.18964933847419, 56.171575172537835],
                      [10.189631603208369, 56.17157809057851],
                      [10.189613867942548, 56.17158100861918],
                      [10.189596132676725, 56.171583926659856],
                      [10.189578397410903, 56.17158684470053],
                      [10.189560662145082, 56.1715897627412],
                      [10.189542926879259, 56.17159268078187],
                      [10.189525191613438, 56.17159559882255],
                      [10.189507456347616, 56.17159851686322],
                      [10.189489721081793, 56.17160143490389],
                      [10.189471985815972, 56.17160435294457],
                      [10.18945425055015, 56.17160727098524],
                      [10.189436515284328, 56.17161018902591],
                      [10.189418780018507, 56.17161310706659],
                      [10.189401044752685, 56.17161602510726],
                      [10.189383309486862, 56.171618943147934],
                      [10.189365574221041, 56.17162186118861],
                      [10.18934783895522, 56.17162477922928],
                      [10.189330103689397, 56.171627697269955],
                      [10.189312368423575, 56.17163061531063],
                      [10.189294633157754, 56.171633533351304],
                      [10.189276897891931, 56.171636451391976],
                      [10.18925916262611, 56.171639369432654],
                      [10.189241427360288, 56.171642287473325],
                      [10.189223692094465, 56.171645205514],
                      [10.189205956828644, 56.17164812355467],
                      [10.189188221562823, 56.17165104159535],
                      [10.189170486297, 56.17165395963602],
                      [10.189152751031179, 56.17165687767669],
                      [10.189135015765356, 56.17165979571737],
                      [10.189117280499534, 56.17166271375804],
                      [10.189099545233713, 56.17166563179871],
                      [10.18908180996789, 56.17166854983939],
                      [10.189064074702069, 56.17167146788006],
                      [10.189046339436247, 56.17167438592073],
                      [10.189028604170424, 56.17167730396141],
                      [10.189010868904603, 56.17168022200208],
                      [10.188993133638782, 56.17168314004275],
                      [10.188975398372959, 56.17168605808343],
                      [10.188957663107137, 56.1716889761241],
                      [10.188939927841316, 56.17169189416477],
                      [10.188922192575493, 56.171694812205445],
                      [10.188904457309672, 56.17169773024612],
                      [10.18888672204385, 56.171700648286794],
                      [10.188868986778028, 56.171703566327466],
                      [10.188851251512206, 56.171706484368144],
                      [10.188833516246385, 56.171709402408815],
                      [10.188815780980562, 56.17171232044949],
                      [10.18879804571474, 56.171715238490165],
                      [10.18878031044892, 56.17171815653084],
                      [10.188762575183096, 56.17172107457151],
                      [10.188744839917275, 56.171723992612186],
                      [10.188727104651454, 56.17172691065286],
                      [10.18870936938563, 56.17172982869353],
                      [10.18869163411981, 56.17173274673421],
                      [10.188673898853988, 56.17173566477488],
                      [10.188656163588165, 56.17173858281555],
                      [10.18862542434161, 56.17174364044325],
                      [10.188635760165015, 56.17175857143494],
                      [10.18864609598842, 56.17177350242664],
                      [10.188656431811825, 56.17178843341833]]
T_INT_TO_REAL = [0,15,25,81,126,153,173,201,215,219,245,271,311,374,468,472]


class Placemark(object):
    """docstring for Placemark."""
    _NAMESPACE = "{http://www.opengis.net/kml/2.2}"

    def __init__(self, lat, lon, time):
        super(Placemark, self).__init__()
        self.latitude = lat
        self.longitude = lon
        self.time = time

    @staticmethod
    def parse_file(filepath):
        root = ET.parse(filepath).getroot()
        tags = root.findall(Placemark.xpath("Document", "Placemark"))
        placemarks = list()
        init_time = Placemark.parse_time(root.find(Placemark.xpath("Document", "Placemark", "TimeStamp", "when")).text)
        for tag in tags:
            coords = tag.find(Placemark.xpath("Point", "coordinates")).text.strip().split(",")[:-1]
            time = tag.find(Placemark.xpath("TimeStamp", "when")).text
            placemarks.append(Placemark(lat=float(coords[0]),
                                        lon=float(coords[1]),
                                        time=(Placemark.parse_time(time) - init_time)))
        return placemarks

    @staticmethod
    def parse_time(timestring):
        """ Converts kml time string to a datetime """ #%I
        return datetime.datetime.strptime(timestring, "%Y-%m-%dT%H:%M:%SZ")

    @staticmethod
    def xpath(*paths):
        """ Creates an xpath string with namespace """
        _xpath = ""
        for path in paths:
            _xpath += Placemark._NAMESPACE
            _xpath += path
            _xpath += "/"
        return _xpath[:-1]

    @staticmethod
    def distance(a, b):
        """ Calculates the distance between two placemarks """
        a_lat = math.radians(a.latitude)
        b_lat = math.radians(b.latitude)
        a_lon = math.radians(a.longitude)
        b_lon = math.radians(b.longitude)
        delta_lat = b_lat - a_lat
        delta_lon = b_lon - a_lon
        haversine_A = (math.sin(delta_lat * 0.5) * math.sin(delta_lat * 0.5) +
                       math.sin(delta_lon * 0.5) * math.sin(delta_lon * 0.5) *
                       math.cos(a_lat) * math.cos(b_lat))
        haversine_B = 2 * math.atan2(math.sqrt(haversine_A), math.sqrt(1 - haversine_A))
        return 6378137 * haversine_B


# def generate_INT_TO_REAL():
#     """ Finds the index of the real points in the interpolated """
#     result = "["
#     for i in range(len(T_POS_INTERPOLATED)):
#         for real in T_POS:
#             if T_POS_INTERPOLATED[i][0] is real[0] and T_POS_INTERPOLATED[i][1] is real[1]:
#                 result += str(i) + ","
#     result = result[:-1]
#     result += "]"
#     print(result)

# paused 3*60 = 180 -> 5*60 + 4 = 304
# paused 9*60 + 40 = 580 -> 11*60 + 44 = 704

def main(arg):
    """ Main entry point of the program, takes 1 argument: the file path to the tested pos """
    errors = list()
    placemarks = Placemark.parse_file(filepath=arg)
    for placemark in placemarks:
        print(placemark)
        # offset = 0
        #
        # if ((t.seconds >= 180) and (t.seconds <= 304)): # pause 1
        #     continue
        # elif ((t.seconds >= 580) and (t.seconds <= 704)): # pause 2
        #     continue
        #
        # if t.seconds > 304:
        #     offset += 124
        #     if t.seconds > 704:
        #         offset += 124
        #
        # # find next real
        # next_real = T_INT_TO_REAL[-1]
        # for real_index in range(len(T_INT_TO_REAL)):
        #     if t.seconds - offset < T_INT_TO_REAL[real_index]:
        #         next_real = T_INT_TO_REAL[real_index]
        #         break
        #
        # error_dist = 0
        #
        # i = t.seconds - offset
        # while i < min(next_real * METERSPERSEC, t_next.seconds - offset):
        #     error_dist += distance(p, T_POS_INTERPOLATED[int(i/2)])
        #     i += 1
        #
        # errors.append(error_dist)
    errors.sort()
    # f = open(arg[:-4] + ".error", "w")
    for error in errors:
        print(error)
        # f.write(str(error))
        # f.write("\n")


if __name__ == '__main__':
    if len(sys.argv) is 2:
        if os.path.isfile(sys.argv[1]):
            main(sys.argv[1])
        else:
            print("Invalid filepath")
    else:
        print("1 argument required")
